# 什么是闪电网络

### 比特币闪电网络是什么？

+ 闪电网络是一个建立在比特币基础上的系统，它主要是通过把交易放到比特币主链之外的方式，让人们能够即时发送 / 接收付款且降低交易费用。 它对于比特币逐渐成为日常支付货币来说作用愈发鲜明。

### 闪电网络发展史

+ 中本聪对支付通道的解释是「未记录的开放交易可以被保持并替换，直到 nLockTime 达到为止。它可能包含多方支付，每个输入所有者都需对输入进行签名。」

+ 但从「支付通道」概念的提出到闪电网络的工程实现，却经历了漫长时间，开发者们不断地发展和完善这一理念，「双向支付通道」、「链下支付网络」等等概念相继被提出，最终时间来到 2015 年，闪电网络白皮书发布，它以之前的这些研究为基础，以去信任的方式实现了支付通道网络。

+ 2015 年 2 月，Thaddeus Dryja 和 Joseph Poon 提交了一篇名为《比特币闪电网络：可扩展的 off-chain 即时支付》的白皮书，该白皮书又被称作闪电网络白皮书，它奠定了闪电网络的理论基础。


+ 2015 年 5 月，Linux 内核开发者 RustyRussell 用 C 语言完成了一个闪电网络的实现，称为 C-Lightning。这是闪电网络的第一次实现。

+ 2015 年年底，一份关于比特币系统扩展性问题的解决方案在开发者社区获得了多数共识，并成为 Bitcoin Core 的发展路线图，其中包括了部署闪电网络。闪电网络由此被正式纳入比特币系统。

+ 2016 年，多个团队开始了对闪电网络的开发。这其中包括闪电网络白皮书的作者 Dryja 和 Poon，他们创立了 Lightning Labs，以 Go 语言实现闪电网络。

+ 2016 年年底，第一次「闪电峰会」召开，闪电网络的开发者们讨论了如何让所有不同的闪电网络实现具有互操作性，为此，一个名为 BOLT 的闪电网络协议规范诞生了，它也是如今闪电网络真正的发展基础。

+ 2017 年 12 月，闪电网络测试版首次上线主网，开发者 Alex Bosworth 通过与 Bitrefill 建立闪电通道支付了自己的电话账单，这是闪电网络上的第一笔交易。

+ 2018 年 3 月，Lightning Labs 宣布闪电网络正式上线比特币主网。随后，包括钱包在内的各种闪电网络基础设施以超乎想象的速度发展起来。

+ 2018 年年底，人们迎来了闪电网络节点数量和交易量的「爆发」，2019 年年初，比特币交易量创下新高，而诸多拥有较大市场份额的电子支付系统及电商平台陆续支持闪电网络支付。

+ 目前，闪电网络的大部分开发工作由三个团队来共同完成，它们是 Blockstream （C 版），LightningLabs （Go 版）、ACINQ （Scala 版）。它们对闪电网络的不同实现支持完全的互操作，也就是说不同系统可以无缝衔接。

+ 2019 年，闪电网络的开发工作将主要聚焦在四个方面：

（1）提高安全性；

（2）最大化流动性；

（3）改善隐私；

（4）优化用户体验。

### 它是如何工作的？

+ 闪电网络是一个建立在比特币区块链上的智能合约系统，允许双方之间能够直接完成快速，廉价的支付。 为了实现这些快速廉价的交易，有以下步骤:

+ 装置有一个多重签名钱包，钱包里装有一定数量的比特币(至少由双方中的一方提供)；

+ 然后，钱包地址保存到比特币公链，地址中包括一个资产负债表(智能合约) ，需证明比特币存款的数目与户主；

+ 这个支付通道一旦建立之后，双方无需验证区块链存储信息，就有可能进行无限量的交易；

+ 在每笔交易中，双方都会在更新的资产负债表上签名，以便及时反馈多重签名钱包中比特币的数。 目与户主；

+ 更新后的资产表不会上传至区块链，而是双方各保留了一份复印件；

+ 无论何时发生争议或支付渠道被关闭，双方都可以使用最新的双方签字的资产负债表来支付他们在多重签字钱包中的份额。

+ 这些听起来都很麻烦，但事实上对于最终用户来说，闪电支付几乎不需要任何额外的努力，以上所有步骤都会在后台自动完成。


### 优点

+ 小额支付成为可能: 由于费用与支付金额成比例，你可以支付一小部分; satoshi（比特币最小单位）千分之几的账单甚至也可以完成；

+ 付款是即时支付的: 这些钱是在一定时间内（通过网络往返目的地所需）发送的，通常只需要几分之一秒；

+ 改善隐私: 并不是所有的交易都存储在公共区块链上，只有当交易通道最终关闭，双方分配好资产的那一次才会被存储。

### 缺点

+ 同行失败: 如果一个同行反应迟钝，用户可能要等上几个小时才能关闭支付通道，并通过另一种途径重新发送资金；

+ 没有离线支付: 用户无法支付不在线的人；

+ 不适合大额支付: 即使一条经由各种支付通道的路线可能存在，但同行多重签名钱包中的资金可能不足以转移大笔资金；

+ 集中化: 闪电网络可能会鼓励支付枢纽的集中化(类似于矿工集中化)。


### 我应该使用闪电网络吗？
 
+ 好吧，事实上，如果你不是高级用户，那么你仍将不能使用闪电网络。所以，目前能做的只有等待，看看闪电网络是否能像其所声称的、是否能真正起作用、是否足够安全。

+ 请记住，闪电网络不是唯一的扩容提案，并且在这场扩容竞争中，它也不是无可争议的领先者，比特币现金(BCH)便是其主要的竞争对手。比特币现金追随者和闪电网络支持者之间的辩论非常激烈，尚无休止。有可能其中一个提案胜出，也有可能它们会共存，也可能有另一种完全不同的解决方案。
